<?xml version="1.0" ?>
<container xmlns="http://symfony.com/schema/dic/services"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <!-- classes -->
        <!-- game -->
        <parameter key="hittracker_game.settings_schema.game.class">HitTracker\GameBundle\Settings\GameSettingsSchema</parameter>
        <parameter key="hittracker_game.manager.game.class">HitTracker\GameBundle\GameManager</parameter>
        <parameter key="hittracker_game.form.game.type.class">HitTracker\GameBundle\Form\Type\GameType</parameter>
        <parameter key="hittracker_game.event_listener.game.class">HitTracker\GameBundle\EventListener\GameListener</parameter>
        <!-- player -->
        <parameter key="hittracker_game.form.player_collection.type.class">HitTracker\GameBundle\Form\Type\PlayerCollectionType</parameter>
        <parameter key="hittracker_game.form.player.type.class">HitTracker\GameBundle\Form\Type\PlayerType</parameter>
        <!-- vest -->
        <parameter key="hittracker_game.form.vest.type.class">HitTracker\GameBundle\Form\Type\VestType</parameter>

        <!-- configuration -->
    </parameters>

    <services>
        <!-- game -->
        <service id="hittracker_game.settings_schema.game" class="%hittracker_game.settings_schema.game.class%">
            <tag name="sylius.settings_schema" namespace="game" />
        </service>
        <service id="hittracker_game.manager.game" class="%hittracker_game.manager.game.class%">
            <argument type="service" id="hittracker.repository.game" />
        </service>
        <service id="hittracker_game.form.type.game" class="%hittracker_game.form.game.type.class%">
            <argument type="service" id="sylius.settings.manager" />
            <!-- TODO: rename once sylius/resource-bundle allows global configuration -->
            <tag name="form.type" alias="hittracker_game"/>
        </service>
        <service id="hittracker_game.event_listener.game" class="%hittracker_game.event_listener.game.class%">
            <argument type="service" id="hittracker.repository.game" />
            <tag name="kernel.event_listener" event="hittracker.game.pre_create" method="arenaOpenCheck"/>
        </service>
        <!-- player -->
        <service id="hittracker_game.form.type.player" class="%hittracker_game.form.player.type.class%">
            <argument type="service" id="sylius.settings.manager" />
            <argument type="service" id="hittracker.repository.vest" />
            <!-- TODO: rename once sylius/resource-bundle allows global configuration -->
            <tag name="form.type" alias="hittracker_player"/>
        </service>
        <service id="hittracker_game.form.type.player_collection" class="%hittracker_game.form.player_collection.type.class%">
            <argument type="service" id="sylius.settings.manager" />
            <!-- TODO: rename once sylius/resource-bundle allows global configuration -->
            <tag name="form.type" alias="hittracker_player_collection"/>
        </service>
        <!-- vest -->
        <service id="hittracker_game.form.type.vest" class="%hittracker_game.form.vest.type.class%">
            <!-- TODO: rename once sylius/resource-bundle allows global configuration -->
            <tag name="form.type" alias="hittracker_vest"/>
        </service>
    </services>
</container>
